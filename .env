# ============================================
# Belldandy 环境变量配置模板
# 复制此文件为 .env.local 并填写实际值
# ============================================

# ------ 服务配置 ------
# Gateway 服务端口（默认 28889）
BELLDANDY_PORT=28889

# 绑定地址（默认 127.0.0.1，设置为 0.0.0.0 可局域网访问）
# BELLDANDY_HOST=127.0.0.1

# 状态目录（配对、记忆、人格文件存放路径；同时是 file_read/file_write/file_delete 的工作区根目录，默认 ~/.belldandy）
BELLDANDY_STATE_DIR=C:\Users\admin\.belldandy
# 额外允许 Agent 读写的根目录，逗号分隔（如其他盘符下的目录），不设则仅限上面状态目录
BELLDANDY_EXTRA_WORKSPACE_ROOTS=C:/,E:/

# ------ 鉴权配置 ------
# 鉴权模式: none | token | password（默认 none）
# 注意：即使是 none，新设备连接也需要 Pairing 配对
BELLDANDY_AUTH_MODE=none
# 当 AUTH_MODE=token 时必填
# BELLDANDY_AUTH_TOKEN=your-secret-token
# 当 AUTH_MODE=password 时必填
# BELLDANDY_AUTH_PASSWORD=your-password


# 流式输出（默认 true）
BELLDANDY_OPENAI_STREAM=true
# 单次模型调用超时（毫秒，默认 120000 即 2 分钟）
BELLDANDY_AGENT_TIMEOUT_MS=300000

# ------ 工具与能力 ------
# 启用工具调用（联网、读写文件等）
BELLDANDY_TOOLS_ENABLED=true

# 工具策略配置文件（JSON），用于覆盖默认的工具策略
# 示例：E:\\project\\belldandy\\config\\tools-policy.json
BELLDANDY_TOOLS_POLICY_FILE=E:\\project\\belldandy\\config\\tools-policy.json
# 示例内容（JSON）：
# {
#   "allowedPaths": ["workspace", "notes"],
#   "deniedPaths": [".git", "node_modules", ".env"],
#   "exec": {
#     "quickTimeoutMs": 5000,
#     "longTimeoutMs": 300000,
#     "extraSafelist": ["terraform", "docker", "podman", "kubectl", "helm"],
#     "extraBlocklist": [],
#     "nonInteractive": {
#       "enabled": true,
#       "rules": {
#         "npm init": "-y",
#         "conda install": "-y"
#       }
#     }
#   }
# }

# ------ 记忆与向量检索 ------
# 启用向量搜索（需要 Embedding 模型）
BELLDANDY_EMBEDDING_ENABLED=true
BELLDANDY_EMBEDDING_MODEL=text-embedding-ada-002

# ------ 心跳定时任务 ------
# 启用心跳（Agent 定期检查 HEARTBEAT.md 并主动联系你）
BELLDANDY_HEARTBEAT_ENABLED=true
# 心跳间隔（支持 30m, 1h, 300s 格式）
BELLDANDY_HEARTBEAT_INTERVAL=30m
# 活跃时段（可选，深夜不打扰）
# BELLDANDY_HEARTBEAT_ACTIVE_HOURS=08:00-23:00

# ------ 浏览器自动化 ------
# 启用浏览器中继自动启动（需配合 Chrome 扩展）
BELLDANDY_BROWSER_RELAY_ENABLED=true
BELLDANDY_RELAY_PORT=28892

# ------ MCP 支持 ------
# 启用 MCP 协议（需同时启用工具系统）
BELLDANDY_MCP_ENABLED=true

# ------ 日志系统 ------
# 最低日志级别 (debug/info/warn/error)
BELLDANDY_LOG_LEVEL=debug
# 日志目录，默认 ~/.belldandy/logs
BELLDANDY_LOG_DIR=~/.belldandy/logs
# 单文件最大大小，超过则轮转 (如 10MB)
BELLDANDY_LOG_MAX_SIZE=10MB
# 日志保留天数，超过自动清理
BELLDANDY_LOG_RETENTION_DAYS=7
# 是否输出到控制台 / 是否写入文件
BELLDANDY_LOG_CONSOLE=true
BELLDANDY_LOG_FILE=true

# ------ 飞书渠道（可选）------
# BELLDANDY_FEISHU_APP_ID=cli_xxxxxxxxxxxxxxxx
# BELLDANDY_FEISHU_APP_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
