## 自测清单（Belldandy 文件控制与网页操作）

下面清单可直接发给 Belldandy 用于自动化测试。每条都包含**步骤**与**期望结果**，覆盖常见与边界场景。

### 一、环境与准备
- **环境信息采集**
  - **步骤**：打印 OS、Shell、工作区根路径、当前日期时间。
  - **期望**：输出信息准确、格式清晰。
- **权限与边界**
  - **步骤**：尝试访问工作区外路径（只读），并记录是否被拒绝。
  - **期望**：外部路径访问被明确拒绝或需要授权提示。

### 二、文件控制（读/写/改/删）
- **读取普通文本**
  - **步骤**：读取 `C:\Users\admin\Pictures\Screenshots\SOUL.md` 前 200 行。
  - **期望**：内容正确，行数与分页正常。
- **读取空文件**
  - **步骤**：读取一个已存在空文件（若无，可先创建空文件）。
  - **期望**：返回 “File is empty.” 或等价提示。
- **读取不存在文件**
  - **步骤**：读取C:\Users\admin\Pictures\Screenshots\OK文件路径。
  - **期望**：返回明确错误，不重复重试。
- **全文搜索关键字**
  - **步骤**：搜索关键字 `Belldandy` 或 `agent`。
  - **期望**：返回匹配文件列表与内容片段（若设置）。
- **按模式搜索文件**
  - **步骤**：搜索 `*.md` 或 `*.ts`。
  - **期望**：返回符合模式的文件路径集合。
- **创建新文件**
  - **步骤**：创建 `tmp/test-file.txt` 写入固定文本。
  - **期望**：文件创建成功，内容正确。
- **修改文件内容（精确替换）**
  - **步骤**：在 `tmp/test-file.txt` 将某一行替换为新行。
  - **期望**：仅目标行被替换，其它内容不变。
- **删除文件**
  - **步骤**：删除 `tmp/test-file.txt`。
  - **期望**：删除成功，后续读取应报不存在。
- **目录遍历**
  - **步骤**：列出C:\Users\admin\.claude目录与 `skills/` 下一级子目录。
  - **期望**：返回目录结构，忽略隐藏项符合规则。

### 三、网页操作（浏览器自动化）
- **打开新页面**
  - **步骤**：打开新页面并导航到 `https://example.com`。
  - **期望**：页面加载成功，无错误。
- **页面快照**
  - **步骤**：获取页面 a11y 快照。
  - **期望**：返回元素树与 uid 信息。
- **元素定位与点击**
  - **步骤**：点击页面上的 `More information...` 链接。
  - **期望**：成功导航到新页面（IANA 示例域说明页）。
- **输入框填写**
  - **步骤**：访问含输入框页面（如本地测试页），填入文本。
  - **期望**：输入框值正确更新。
- **下拉选择**
  - **步骤**：操作 `<select>` 元素，选择指定项。
  - **期望**：选中项正确显示。
- **键盘操作**
  - **步骤**：使用 `Tab` 或 `Enter` 触发交互。
  - **期望**：焦点切换/提交事件正常。
- **等待元素出现**
  - **步骤**：等待特定文案或元素出现。
  - **期望**：在超时前出现即通过，否则返回超时错误。
- **截图**
  - **步骤**：对页面或特定元素截图。
  - **期望**：截图生成成功，尺寸与内容正确。

### 四、异常与恢复
- **网络错误处理**
  - **步骤**：访问不存在的域名或 404 地址。
  - **期望**：返回明确错误信息，不崩溃。
- **页面关闭与切换**
  - **步骤**：打开两页，切换页面，关闭其中一个。
  - **期望**：切换与关闭正常，剩余页面可继续操作。
- **对话框处理**
  - **步骤**：触发浏览器弹窗（alert/confirm）。
  - **期望**：能正确处理弹窗并继续执行后续步骤。

### 五、日志与结果输出
- **统一日志格式**
  - **步骤**：输出每个用例的开始、结束、耗时、结果。
  - **期望**：日志结构化，可机器解析。
- **失败用例收敛**
  - **步骤**：出现失败时记录失败原因、重现步骤、截图/快照引用。
  - **期望**：信息完整、可复现。

---

## 交付说明（发给 Belldandy 的执行规则）
- **执行顺序**：按清单从上到下运行。
- **失败处理**：失败即记录并继续后续用例，不中断全局流程。
- **输出格式**：建议 `JSONL` 或 `表格`（用例名、结果、耗时、错误信息）。

